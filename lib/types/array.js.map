{"version":3,"file":"array.js","names":["_find2","_interopRequireDefault","require","_ValidationError","_config","_validate","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_default","name","alias","validate","value","itemSchema","options","useFieldPath","abortEarly","throwError","context","Array","isArray","invalidType","errors","_find","fieldValue","i","path","messages","makePath","reason","$$PARENT","$$CURRENT","ValidationError","push","length","exports","module"],"sources":["../../src/types/array.js"],"sourcesContent":["import _find from 'lodash/find';\n\nimport ValidationError from '../ValidationError';\nimport { messages } from '../config';\nimport validate, { invalidType } from '../validate';\n\nexport default {\n    name: 'array',\n\n    alias: ['list'],\n\n    /**\n     *\n     * @param {*} value\n     * @param {*} itemSchema\n     * @param {*} options\n     * @param {*} context\n     * @returns {true|ValidationError}\n     */\n    validate: (\n        value,\n        itemSchema,\n        options = { useFieldPath: true, abortEarly: true, throwError: true },\n        context = {}\n    ) => {\n        const { abortEarly, throwError } = options;\n\n        if (value != null && !Array.isArray(value)) {\n            return invalidType(value, 'array', options, context);\n        }\n\n        if (typeof itemSchema === 'function') {\n            // use deferred activation of schema to avoid circullar reference\n            itemSchema = itemSchema();\n        }\n\n        if (value) {\n            const errors = [];\n\n            _find(value, (fieldValue, i) => {\n                const path = messages.makePath(i, context.path);\n                const reason = validate(fieldValue, itemSchema, options, {\n                    name: null,\n                    path,\n                    $$PARENT: value,\n                    $$CURRENT: fieldValue,\n                });\n\n                if (reason !== true) {\n                    if (abortEarly) {\n                        if (throwError) {\n                            throw new ValidationError(reason, fieldValue, path);\n                        }\n\n                        return reason;\n                    }\n\n                    errors.push(...reason);\n                }\n            });\n\n            if (errors.length > 0) {\n                if (throwError) {\n                    throw new ValidationError(errors, value, context.path);\n                }\n\n                return errors;\n            }\n        }\n\n        return true;\n    },\n};\n"],"mappings":"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"}